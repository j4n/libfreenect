#!/usr/bin/make -f
# -*- makefile -*-

DEB_LDFLAGS_MAINT_APPEND=-Wl,-Bsymbolic-functions -Wl,--as-needed
include /usr/share/dpkg/buildflags.mk
export CFLAGS CPPFLAGS LDFLAGS

%:
	dh $@

override_dh_auto_configure:
	dh_auto_configure -- -DBUILD_PYTHON:Bool=True

override_dh_auto_build-indep:
	doxygen debian/doxygen.conf

override_dh_auto_install:
	dh_auto_install
	mv debian/tmp/usr/bin/glview debian/tmp/usr/bin/freenect-glview
	mv debian/tmp/usr/bin/glpclview debian/tmp/usr/bin/freenect-glpclview
	mv debian/tmp/usr/bin/cppview debian/tmp/usr/bin/freenect-cppview
	mv debian/tmp/usr/bin/hiview debian/tmp/usr/bin/freenect-hiview
	mv debian/tmp/usr/bin/record debian/tmp/usr/bin/freenect-record
	mv debian/tmp/usr/bin/tiltdemo debian/tmp/usr/bin/freenect-tiltdemo
	mv debian/tmp/usr/bin/fakenect debian/tmp/usr/bin/freenect-fakenect
	mv debian/tmp/usr/bin/regview debian/tmp/usr/bin/freenect-regview

override_dh_installdocs:
	dh_installdocs --all CONTRIB

override_dh_clean-indep:
	rm -rf debian/html
